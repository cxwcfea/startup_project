<!doctype html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">

	<title>Test</title>
	<script type="text/javascript" src="/vendor/moment/moment.js"></script>	
	<script type="text/javascript" src="/vendor/jquery/dist/jquery.js"></script>
	<style>
		button{height:40px;width:300px; margin:5px;}
	</style>
    <script src="http://pv.sohu.com/cityjson"></script>
</head>

<body>


        <form action="/test_sign" method="post">
            <br/>服务名称：即时交易<input type="text" name="service" value="create_direct_pay_by_user">
            <br/>合作者商户ID<input type="text" name="partner" value="201204201739476361">
            <br/>字符集<input type="text" name="input_charset" value="UTF-8">
            <br/>签名算法<input type="text" name="sign_type" value="MD5">
            <br/>服务器异步通知页面路径<input type="text" name="notify_url" value="/">
            <br/>页面跳转同步通知页面路径<input type="text" name="return_url" value="/">
            <br/>请求出错时的通知页面路径，可空<input type="text" name="error_notify_url" value="">

            <br/>通过时间戳查询接口（见AskForTimestampDemo），获取的加密系统时间戳<input type="text" name="anti_phishing_key" value="">
            <br/>用户在外部系统创建交易时，由外部系统记录的用户IP地址<input type="text" id="ip_address" name="exter_invoke_ip" value="">

            <br/>易八通合作商户网站唯一订单号<input type="text" name="out_trade_no" value="2015041217271095">
            <br/>商品名称<input type="text" name="subject" value="中文测试123">
            <br/>支付类型，默认值为：1（商品购买）<input type="text" name="payment_type" value="1">

            <br/>卖家易八通用户名<input type="text" name="seller_email" value="">
            <br/>卖家易八通用户ID<input type="text" name="seller_id" value="201204201739476361">

            <br/>买家易八通用户名<input type="text" name="buyer_email" value="">
            <br/>买家易八通用户ID<input type="text" name="buyer_id" value="">

            <br/>商品单价<input type="text" name="price" value="">
            <br/>交易金额<input type="text" name="total_fee" value="3.20">
            <br/>购买数量<input type="text" name="quantity" value="">

            <br/>商品描述<input type="text" name="body" value="">
            <br/>商品展示网址<input type="text" name="show_url" value="">
            <br/>支付方式<input type="text" name="pay_method" value="bankPay">
            <br/>默认网银<input type="text" name="default_bank" value="CMB_B2C">
            <br/>分润用户名集<input name="royalty_parameters" value=""/>
            <br/>提成类型<input name="royalty_type" value=""/>
            <table>
                <tr>
                    <td>即时支付</td>
                    <td><input type="submit" value="提交支付" /></td>
                </tr>
            </table>
        </form>

    <button onclick="theCallback()">fill ip</button>


</body>
<script>

	function theCallback() {
		console.log('theCallback ');
        $('#ip_address')[0].value = window.returnCitySN["cip"];
	}
	function serverOrder(waresid) {
		$.ajax({
			url : '/order?waresid=' + waresid,
			type : 'POST',
			dataType : 'json',
			success : function(data) {
				if (data.transid !== undefined) {
					showPayWindow(data.transid,aibeiNotify);
				} else {
					console.log(data);
				}
			},
			error : function(e) {
				console.log(e);
			}
		});
	}
	
</script>
</html>
