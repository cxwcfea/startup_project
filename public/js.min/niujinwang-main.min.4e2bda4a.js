function copycode1(a){var b=document.getElementById(a);if(is_ie&&"none"!=b.style.display){alert("复制成功");var c=document.body.createTextRange();c.moveToElementText(b),c.scrollIntoView(),c.select(),c.execCommand("Copy"),c.collapse(!1)}else alert("该浏览器不支持此功能，请Ctrl+C复制")}!function(){"use strict";angular.module("mainApp",["ui.bootstrap","commonApp"]),angular.module("mainApp").config(["$httpProvider",function(a){a.defaults.headers.get||(a.defaults.headers.get={}),a.defaults.headers.get["Cache-Control"]="no-cache",a.defaults.headers.get.Pragma="no-cache"}]),angular.module("mainApp").controller("MainApplyController",["$http","$location","$window","days","util",function(a,b,c,d,e){function f(){j.summary.lever=j.selectedLever.value,j.summary.deposit=j.summary.amount*l,j.summary.warnValue=e.getWarnValue(j.summary.amount,j.summary.deposit),j.summary.sellValue=e.getSellValue(j.summary.amount,j.summary.deposit),j.summary.serviceCharge=e.getServiceCharge(j.summary.lever);var a=j.summary.amount/1e4*j.summary.serviceCharge;j.summary.charge=a*j.discount,j.summary.total=j.summary.deposit+a,j.endTime=d.endTime(k,j.summary.day)}function g(){angular.forEach(j.amountList,function(a){a.select=!1})}function h(){j.otherAmount>=j.min_amount?j.otherAmount<=j.max_amount?j.summary.amount=Math.floor(j.otherAmount):j.otherAmount=j.summary.amount=j.max_amount:j.summary.amount=0,f()}function i(){a.post("/apply",j.summary).success(function(a){c.location.href="/apply_confirm/"+a.apply_serial_id}).error(function(a,b){401===b?j.showLoginWindow=!0:console.log(a.error_msg)})}var j=this;j.min_amount=2e3,j.max_amount=1e6;var k=d.startTime();j.leverList=[{name:"4倍",value:4},{name:"3倍",value:3},{name:"2倍",value:2}],j.agree=!0,j.showOtherAmount=!1,j.otherAmount,j.showLoginWindow=!1,j.selectedLever=j.leverList[0],j.discount=1,j.summary={day:1,amount:5e3},j.endTime=d.endTime(k,j.summary.day),j.forbiddenStockList;var l=1/j.selectedLever.value;f(),j.amountList=[{name:"5000元",value:"5000",select:!0},{name:"1万",value:"10000"},{name:"3万",value:"30000"},{name:"5万",value:"50000"},{name:"10万",value:"100000"},{name:"30万",value:"300000"},{name:"50万",value:"500000"},{name:"100万",value:"1000000"}],j.selectAmount=function(a){g(),j.showOtherAmount=!1,a.select=!0,j.summary.amount=a.value,f()},j.toggleOtherAmount=function(){j.showOtherAmount=!j.showOtherAmount,j.showOtherAmount?h():j.selectAmount(j.amountList[0])},j.finishOtherAmount=function(){h()},j.submitApply=function(){if(!j.agree)return void alert("您必须同意《牛金操盘协议》");if(j.summary.amount<=0||j.summary.amount>1e6){var a=$("#invalid-value-modal");return void a.modal("open")}i()},j.leverChange=function(){l=1/j.selectedLever.value,f()},j.showForbiddenStocks=function(){if(j.forbiddenStockList){var b=$("#forbidden-stock-modal");b.modal("open")}else a.get("/api/fetch_forbidden_stocks").success(function(a){j.forbiddenStockList=a;var b=$("#forbidden-stock-modal");b.modal({width:750,height:450})}).error(function(){})},j.login=function(){return j.mobile?j.password?void a.post("/api/login",{mobile:j.mobile,password:j.password}).success(function(){i()}).error(function(a){m("danger",a.error_msg)}):void m("danger","请输入密码，6到20位"):void m("danger","请输入有效的手机号")},j.alerts=[];var m=function(a,b){j.alerts=[],j.alerts.push({type:a,msg:b})};j.closeAlert=function(a){j.alerts.splice(a,1)}}]),angular.module("mainApp").controller("MainApplyConfirmController",["$http","$location","$window","days","util",function(a,b,c,d,e){function f(){g.serviceFee=e.getServiceFee(g.apply),g.totalAmount=g.apply.deposit+g.serviceFee-g.rebate,g.shouldPay=g.totalAmount-g.apply.userBalance,g.shouldPay<=0?(g.shouldPay=0,g.balancePay=!0):g.balancePay=!1}var g=this;g.autoPostpone=!0,g.apply={},c.bootstrappedApplyObject&&angular.extend(g.apply,c.bootstrappedApplyObject),g.freeDays=0,g.rebate=g.freeDays*g.apply.serviceCharge*g.apply.amount/1e4,g.validDays=[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],f(),g.selectDay=function(){f()},g.payForApply=function(){g.apply.autoPostpone=g.autoPostpone,g.apply.shouldPay=g.shouldPay,g.apply.totalAmount=g.totalAmount,a.post("/apply_confirm",g.apply).success(function(b){if(0===g.shouldPay){var d={apply_serial_id:b.apply.serialID,order_id:b.order._id};a.post("/api/users/pay_by_balance",d).success(function(){c.location.assign("/apply/pay_success?serial_id="+b.apply.serialID+"&amount="+b.apply.amount+"&type=1")}).error(function(a){console.log("error:"+a.error_msg)})}else c.location.assign("/recharge?order_id="+b.order._id)}).error(function(a,b){403===b&&(2===a.error_code?alert("对不起，同一用户最多只能有5笔操盘中的配资。暂不能再申请新的配资。"):1===a.error_code&&(g.showIdentityDialog=!0)),console.log("error:"+a.reason)})},g.redirectToIdentity=function(){c.location.assign("/user/#/settings")}}]),angular.module("mainApp").controller("MainYynCtrl",["$scope","$http","$location","$window","days","util",function(a,b,c,d,e,f){function g(){a.summary.type=2,a.summary.interestRate=a.selectedValue.i_value,b.post("/apply",a.summary).success(function(a){d.location.href="/yyn_confirm/"+a.apply_serial_id}).error(function(b,c){401===c?a.showLoginWindow=!0:console.log(b.error_msg)})}a.showLoginWindow=!1,a.forbiddenStockList,a.agree=!0,a.summary={},a.summary.deposit=0,a.summary.warnValue=0,a.summary.sellValue=0,a.parameterList=[{name:"2倍",interest:1.7,value:2,i_value:.017},{name:"3倍",interest:1.8,value:3,i_value:.018},{name:"4倍",interest:1.9,value:4,i_value:.019}],a.periodList=[];for(var h=1;6>=h;++h){var i={name:h+"个月",value:h};a.periodList.push(i)}a.selectedValue=a.parameterList[0],a.selectedMonth=a.periodList[0],a.summary.month=1,a.summary.charge=0,a.selectLever=function(b){console.log("run"),a.selectedValue=b,a.calculateValue()},a.calculateValue=function(){a.summary.amount>=5e4&&a.summary.amount<=1e6?(a.summary.lever=a.selectedValue.value,a.summary.deposit=a.summary.amount/a.selectedValue.value,a.summary.warnValue=f.getWarnValue(a.summary.amount,a.summary.deposit),a.summary.sellValue=f.getSellValue(a.summary.amount,a.summary.deposit),a.charge=(a.summary.amount-a.summary.deposit)*a.selectedValue.i_value,a.summary.charge=a.charge*a.summary.month):(a.summary.deposit=0,a.summary.warnValue=0,a.summary.sellValue=0,a.summary.charge=0)},a.monthChange=function(){a.summary.month=a.selectedMonth.value,a.calculateValue()},a.submitApply=function(){if(!a.agree)return void alert("您必须同意《牛金操盘协议》");if(a.summary.deposit<=0){var b=$("#invalid-value-modal");return void b.modal("open")}g()},a.showForbiddenStocks=function(){if(a.forbiddenStockList){var c=$("#forbidden-stock-modal");c.modal("open")}else b.get("/api/fetch_forbidden_stocks").success(function(b){a.forbiddenStockList=b;var c=$("#forbidden-stock-modal");c.modal({width:750,height:450})}).error(function(){})},a.login=function(){return a.mobile?a.password?void b.post("/api/login",{mobile:a.mobile,password:a.password}).success(function(){g()}).error(function(a){j("danger",a.error_msg)}):void j("danger","请输入密码，6到20位"):void j("danger","请输入有效的手机号")},a.alerts=[];var j=function(b,c){a.alerts=[],a.alerts.push({type:b,msg:c})};a.closeAlert=function(b){a.alerts.splice(b,1)}}]),angular.module("mainApp").controller("MainYYnConfirmCtrl",["$scope","$http","$location","$window","days",function(a,b,c,d){a.apply={},d.bootstrappedApplyObject&&angular.extend(a.apply,d.bootstrappedApplyObject),a.interest=(a.apply.amount-a.apply.deposit)*a.apply.interestRate,a.totalAmount=a.apply.deposit+a.interest,a.shouldPay=a.totalAmount-a.apply.userBalance,a.shouldPay<=0?(a.shouldPay=0,a.balancePay=!0):a.balancePay=!1,a.payForApply=function(){a.apply.shouldPay=a.shouldPay,a.apply.totalAmount=a.totalAmount,b.post("/apply_confirm",a.apply).success(function(c){if(0===a.shouldPay){var e={apply_serial_id:c.apply.serialID,order_id:c.order._id};b.post("/api/users/pay_by_balance",e).success(function(){d.location.assign("/apply/pay_success?serial_id="+c.apply.serialID+"&amount="+c.apply.amount)}).error(function(a){console.log("error:"+a.error_msg)})}else d.location.assign("/recharge?order_id="+c.order._id)}).error(function(b,c){console.log(b),403===c&&(2===b.error_code?alert("对不起，同一用户最多只能有5笔操盘中的配资。暂不能再申请新的配资。"):1===b.error_code&&(a.showIdentityDialog=!0)),console.log("error:"+b.error_msg)})},a.redirectToIdentity=function(){d.location.assign("/user/#/settings")}}])}(),function(){"use strict";angular.module("registerApp",["ui.bootstrap","commonApp"]),angular.module("registerApp").config(["$httpProvider",function(a){a.defaults.headers.get||(a.defaults.headers.get={}),a.defaults.headers.get["Cache-Control"]="no-cache",a.defaults.headers.get.Pragma="no-cache"}]),angular.module("registerApp").controller("RegisterCtrl",["$http","$location","$window","$interval",function(a,b,c,d){var e=this;e.show_verify_window=!1,e.verify_code_error=!1,e.agree=!0,e.register=function(){if(!e.mobile)return void f("danger","请输入正确的手机号");if(!e.password)return void f("danger","请输入密码，长度6到20位");if(!e.confirm_password)return void f("danger","请再输一遍密码，长度6到20位");if(e.password!=e.confirm_password)return void f("danger","两次密码应该保持一致");if(!e.img_code)return void f("danger","请输入6位验证码");if(!e.agree)return void f("danger","您必须同意牛金网用户协议");var b={mobile:e.mobile,password:e.password,img_code:e.img_code,confirm_password:e.confirm_password},c=$("#mgm-code")[0].value;c&&(b.mgm_code="m_"+c),a.post("/api/signup",b).success(function(){e.show_verify_window=!0,e.getVerifyCode()}).error(function(a){f("danger",a.error_msg);var b=Math.random();$("#img_code")[0].src="/api/get_verify_img?cacheBuster="+b})},e.verifyCodeBtnText="获取验证码",e.verifyBtnDisabled=!1,e.getVerifyCode=function(b){if(!e.verifyBtnDisabled){var c=b?2:1;a.get("/api/send_sms_verify_code?mobile="+e.mobile+"&type="+c+"&code="+e.img_code).success(function(){e.verifyBtnDisabled=!0;var a=0;e.verifyCodeBtnText="60秒后重试";var b=d(function(){if(++a,e.verifyCodeBtnText=60-a+"秒后重试",60===a){d.cancel(b),e.verifyCodeBtnText="获取验证码",e.verifyBtnDisabled=!1;var c=Math.random();$("#img_code")[0].src="/api/get_verify_img?cacheBuster="+c,e.show_verify_window=!1}},1e3)}).error(function(a){var b=Math.random();$("#img_code")[0].src="/api/get_verify_img?cacheBuster="+b,e.show_verify_window=!1,e.verifyBtnDisabled=!1,f("danger",a.error_msg)})}},e.confirmVerifyCode=function(){return e.verify_code?4!=e.verify_code.length?(e.signup_error_msg="验证码错误，请重新输入",void(e.verify_code_error=!0)):void a.post("/finish_signup",{mobile:e.mobile,verify_code:e.verify_code}).success(function(){c.location.replace("/welcome")}).error(function(a){e.signup_error_msg=a.error_msg,e.verify_code_error=!0}):(e.signup_error_msg="请输入验证码",void(e.verify_code_error=!0))},e.requestVerifyCode=function(){return e.mobile?e.img_code?void e.getVerifyCode(!0):void f("danger","请输入图形验证码"):void f("danger","请输入正确的手机号")},e.requestChangePass=function(){return e.mobile?e.verify_code?e.password?e.confirm_password?e.password!==e.confirm_password?void f("danger","两次密码输入不一致"):e.img_code?void a.post("/forgot",{mobile:e.mobile,verify_code:e.verify_code,password:e.password,confirm_password:e.confirm_password}).success(function(){f("success","您的密码已经修改成功"),e.passwordChangeSuccess=!0}).error(function(a){f("danger",a.error_msg)}):void f("danger","请输入图形验证码"):void f("danger","请再输一遍密码，长度6到20位"):void f("danger","请输入密码，长度6到20位"):void f("danger","请输入短信验证码"):void f("danger","请输入正确的手机号")},e.login=function(){return e.mobile?e.password?void a.post("/api/login",{mobile:e.mobile,password:e.password}).success(function(a){c.location.replace(a.location?a.location:"/")}).error(function(a){f("danger",a.error_msg)}):void f("danger","请输入密码，长度6到20位"):void f("danger","请输入正确的手机号")},e.alerts=[];var f=function(a,b){e.alerts=[],e.alerts.push({type:a,msg:b})};if(e.closeAlert=function(a){e.alerts.splice(a,1)},$("#server_error_msg_login")[0]){var g=$("#server_error_msg_login")[0].value;1==g?f("danger","手机号码错误，请重新输入"):2==g?f("danger","登录密码错误，请重新输入"):3==g?f("danger","该手机号码还未注册"):4==g&&f("danger","您的账号已被冻结")}e.imgClicked=function(a){var b=Math.random();a.target.src="/api/get_verify_img?cacheBuster="+b}}])}(),$(document).ready(function(){function a(){var a=$("#apply_serial_id")[0].innerText;$.post("/user/apply_close/"+a,{},function(){console.log("close apply done")}).done(function(){console.log("close apply success"),window.location.assign("/apply_detail/"+a)}).fail(function(){console.log("close apply error"),$(".jq_jsBox03").show()}).always(function(){console.log("close apply finished"),$(".jq_jsBox02").hide()})}moment.locale("zh-cn"),$("#verify-code-btn").click(function(){var a=$(this),b=$("#mobile")[0].value;if(!b||0!==b.search(/1[3|5|7|8|][0-9]{9}$/))return void $("#correct-mobile-alert").modal({});var c=0;a.addClass("am-disabled"),a[0].innerText="60秒后重试";var d=setInterval(function(){++c,a[0].innerText=60-c+"秒后重试",60===c&&(clearInterval(d),a[0].innerText="获取验证码",a.removeClass("am-disabled"))},1e3),e={mobile:b.trim()};$.get("/api/send_sms_verify_code",e,function(){})}),$("#get-profit").on("click",function(a){a.preventDefault();var b=$("#apply_serial_id")[0].value;window.location.assign("/apply/get_profit/"+b)});$("#add-deposit").on("click",function(a){a.preventDefault();var b=$("#apply_serial_id")[0].value;window.location.assign("/apply/add_deposit/"+b)}),$("#apply-postpone").on("click",function(a){a.preventDefault();var b=$("#apply_serial_id")[0].value;window.location.assign("/apply/apply_postpone/"+b)}),$(".jq_loginClose").click(function(){$(".jq_recTcc").hide()}),$(".jq_jsBtn02").click(function(a){a.preventDefault(),$(".jq_jsBox").show()}),$(".jq_jsBtn01").click(function(a){a.preventDefault(),$(".jq_jsBox01").hide(),$(".jq_jsBox02").show()}),$(".jq_jsBtn03").click(function(b){b.preventDefault(),a()}),$(".jq_bcbzjBtn").click(function(a){a.preventDefault(),$(".jq_bzbzj").show()}),$(".jq_btn01").click(function(a){if(a.preventDefault(),window.niujin_adding_deposit)return void alert("正在处理中，请稍侯");var b=$("#apply_serial_id")[0].innerText,c=Number($("#add_deposit_input")[0].value);return 0>=c?void alert("请输入有效的金额，金额大于0元"):(window.niujin_adding_deposit=!0,void $.post("/apply/add_deposit/"+b,{deposit_amount:c},function(){console.log("post add deposit done"),window.niujin_adding_deposit=!1}).done(function(a){a.paid?$(".jq_bzbzjbox_success").show():(window.open("/recharge?order_id="+a.order._id),$(".jq_bzbzjbox").show())}).fail(function(a){console.log(a),$(".jq_bzbzjbox_fail").show()}).always(function(){$(".jq_bzbzjbox2").hide()}))}),$(".jq_btn02").click(function(a){a.preventDefault(),$(".jq_bzbzjbox").hide(),$(".jq_bzbzjbox3").show()}),$(".jq_btn_fail").click(function(){$(".jq_bzbzjbox_fail").hide()}),$(".jq_yqBtn03").click(function(a){a.preventDefault(),$(".jq_yqBox").show()}),$(".jq_yzBtn01").click(function(a){a.preventDefault();var b=Number($("#postpone_input")[0].value);if(0>=b||b>22)return void alert("请输入有效的日期，日期大于1小于23");var c=$("#apply_serial_id")[0].innerText;$.post("/apply/apply_postpone/"+c,{period:b},function(){console.log("post postpone done")}).done(function(a){a.paid?$(".jq_yqBox_success").show():(window.open("/recharge?order_id="+a.order._id),$(".jq_yqBox02").show())}).fail(function(a){403===a.status&&console.log(JSON.parse(a.responseText).error_msg),$(".jq_yqBox_fail").show()}).always(function(){$(".jq_yqBox01").hide()})}),$(".jq_yqBtn02").click(function(a){a.preventDefault(),$(".jq_yqBox02").hide(),$(".jq_yqBox03").show()}),$(".jq_yqFinishRecharge").click(function(){$(".jq_yqBox03").hide(),$(".jq_yqBox02").hide()}),$(".jq_tqylBtn03").click(function(a){a.preventDefault(),$(".jq_tqylBox").show()}),$(".jq_tqylBtn01").click(function(a){a.preventDefault(),$(".jq_tqylBox01").hide(),$(".jq_tqylBox02").show()}),$(".jq_tqylBtn02").click(function(a){a.preventDefault();var b=Number($("#get_profit_input")[0].value);if(1>b)return void alert("请输入有效的金额，最少1元");var c=$("#apply_serial_id")[0].innerText;$.post("/apply/get_profit/"+c,{amount:b},function(){console.log("post get profit done")}).done(function(){$(".jq_tqylBox03").show()}).fail(function(){$(".jq_tqylBox_fail").show()}).always(function(){$(".jq_tqylBox02").hide()})})}),$(function(){$(".jq_topLogin").hover(function(){$(".jq_LoginBox").show(),$(this).addClass("TopLoginBoxSelected")},function(){$(".jq_LoginBox").hide(),$(this).removeClass("TopLoginBoxSelected")}),$(".jq_khdBox").hover(function(){$(this).find("div").show(),$(this).addClass("khdBoxSelected")},function(){$(this).find("div").hide(),$(this).removeClass("khdBoxSelected")}),$(".errorText").click(function(){$(this).hide(),$(this).prev("input").focus()}),$(".login-btn").click(function(){$(".errorText").show()})});var lang=new Array,userAgent=navigator.userAgent.toLowerCase(),is_opera=-1!=userAgent.indexOf("opera")&&opera.version(),is_moz="Gecko"==navigator.product&&userAgent.substr(userAgent.indexOf("firefox")+8,3),is_ie=-1!=userAgent.indexOf("msie")&&!is_opera&&userAgent.substr(userAgent.indexOf("msie")+5,3);!function(){var a=[moment("2015-03-14").dayOfYear(),moment("2015-03-15").dayOfYear(),moment("2015-03-21").dayOfYear(),moment("2015-03-22").dayOfYear(),moment("2015-03-28").dayOfYear(),moment("2015-03-29").dayOfYear(),moment("2015-04-04").dayOfYear(),moment("2015-04-05").dayOfYear(),moment("2015-04-06").dayOfYear(),moment("2015-04-11").dayOfYear(),moment("2015-04-12").dayOfYear(),moment("2015-04-18").dayOfYear(),moment("2015-04-19").dayOfYear(),moment("2015-04-25").dayOfYear(),moment("2015-04-26").dayOfYear(),moment("2015-05-01").dayOfYear(),moment("2015-05-02").dayOfYear(),moment("2015-05-03").dayOfYear(),moment("2015-05-09").dayOfYear(),moment("2015-05-10").dayOfYear(),moment("2015-05-16").dayOfYear(),moment("2015-05-17").dayOfYear(),moment("2015-05-23").dayOfYear(),moment("2015-05-24").dayOfYear(),moment("2015-05-30").dayOfYear(),moment("2015-05-31").dayOfYear(),moment("2015-06-06").dayOfYear(),moment("2015-06-07").dayOfYear(),moment("2015-06-13").dayOfYear(),moment("2015-06-14").dayOfYear(),moment("2015-06-20").dayOfYear(),moment("2015-06-21").dayOfYear(),moment("2015-06-22").dayOfYear(),moment("2015-06-27").dayOfYear(),moment("2015-06-28").dayOfYear(),moment("2015-07-04").dayOfYear(),moment("2015-07-05").dayOfYear(),moment("2015-07-11").dayOfYear(),moment("2015-07-12").dayOfYear(),moment("2015-07-18").dayOfYear(),moment("2015-07-19").dayOfYear(),moment("2015-07-25").dayOfYear(),moment("2015-07-26").dayOfYear(),moment("2015-08-01").dayOfYear(),moment("2015-08-02").dayOfYear(),moment("2015-08-08").dayOfYear(),moment("2015-08-09").dayOfYear(),moment("2015-08-15").dayOfYear(),moment("2015-08-16").dayOfYear(),moment("2015-08-22").dayOfYear(),moment("2015-08-23").dayOfYear(),moment("2015-08-29").dayOfYear(),moment("2015-08-30").dayOfYear(),moment("2015-09-05").dayOfYear(),moment("2015-09-06").dayOfYear(),moment("2015-09-12").dayOfYear(),moment("2015-09-13").dayOfYear(),moment("2015-09-19").dayOfYear(),moment("2015-09-20").dayOfYear(),moment("2015-09-26").dayOfYear(),moment("2015-09-27").dayOfYear(),moment("2015-10-01").dayOfYear(),moment("2015-10-02").dayOfYear(),moment("2015-10-03").dayOfYear(),moment("2015-10-04").dayOfYear(),moment("2015-10-05").dayOfYear(),moment("2015-10-06").dayOfYear(),moment("2015-10-07").dayOfYear(),moment("2015-10-10").dayOfYear(),moment("2015-10-11").dayOfYear(),moment("2015-10-17").dayOfYear(),moment("2015-10-18").dayOfYear(),moment("2015-10-24").dayOfYear(),moment("2015-10-25").dayOfYear(),moment("2015-10-31").dayOfYear(),moment("2015-11-01").dayOfYear(),moment("2015-11-07").dayOfYear(),moment("2015-11-08").dayOfYear(),moment("2015-11-14").dayOfYear(),moment("2015-11-15").dayOfYear(),moment("2015-11-21").dayOfYear(),moment("2015-11-22").dayOfYear(),moment("2015-11-28").dayOfYear(),moment("2015-11-29").dayOfYear(),moment("2015-12-05").dayOfYear(),moment("2015-12-06").dayOfYear(),moment("2015-12-12").dayOfYear(),moment("2015-12-13").dayOfYear(),moment("2015-12-19").dayOfYear(),moment("2015-12-20").dayOfYear(),moment("2015-12-26").dayOfYear(),moment("2015-12-27").dayOfYear()],b=function(){var b=moment().startOf("day");for(moment().hour()>=14&&(b=moment().endOf("day").add(1,"ms"));;){var c=b.dayOfYear();if(-1===a.indexOf(c))break;b=b.add(1,"day")}return b},c=function(b,c,d){var e=b.clone();if(d&&2===d){for(e=e.add(c,"months");-1!==a.indexOf(e.dayOfYear());)e=e.add(1,"day");return e}for(--c;c;)e=e.add(1,"day"),-1===a.indexOf(e.dayOfYear())&&--c;return e.hour(14),e.minute(50),e.second(0),e},d=function(b){for(var c=moment(b).dayOfYear(),d=moment().dayOfYear(),e=0;d>=c;)-1===a.indexOf(d)&&++e,--d;return e};angular.module("commonApp",[]),angular.module("commonApp").value("gbToastr",toastr),angular.module("commonApp").factory("gbNotifier",["gbToastr",function(a){return{notify:function(b){a.success(b)},error:function(b){a.error(b)}}}]),angular.module("commonApp").filter("numTrunc",function(){return function(a){if(a){var b=a.toString(),c=b.search("\\.");c>-1&&(b=b.substr(c))}return b}}).filter("integerNum",function(){return function(a){var b=a,c=b.search("\\.");return c>-1&&(b=b.substr(0,c)),b}}).filter("displayManager",function(){return function(a){switch(a){case"13520978346":return"秦亚景";case"13488867185":return"姜涛";case"17709810065":return"刘恩泽";case"18911347741":return"刘瑞";case"18511565878":return"刘亚东";case"15101183931":return"孟雪";case"18931040286":return"魏昊庚";case"15710035052":return"张丽霞";default:return a}}}).filter("displayOrderAmount",function(){return function(a,b){var c="+";return(2===b||9===b||10===b||11===b||17===b||15===b||19===b)&&(c="-"),c+a}}).filter("displayIncome",["$filter",function(a){return function(b,c){var d=b;return 2==c||9==c||10==c||11===c||17===c||15==c||19==c?"":a("currency")(d,"",2)}}]).filter("displayOutcome",["$filter",function(a){return function(b,c){var d="";return(2==c||9==c||10==c||11===c||17===c||15==c||19==c)&&(d=a("currency")(b,"",2)),d}}]).filter("displayMobile",function(){return function(a){return a?(a=a.toString(),a.substr(0,3)+"****"+a.substr(-4)):""}}).filter("displayEmail",function(){return function(a){if(a){var b=a.search("@");return a.substr(0,2)+"***"+a.substr(b)}return""}}).filter("displayIdentityID",function(){return function(a){return a?a.substr(0,4)+"**********"+a.substr(-4):""}}).filter("displayDate",function(){return function(a){return a?moment(a).format("YYYY-MM-DD HH:mm"):"N/A"}}).filter("displayShortDate",function(){return function(a){return moment(a).format("YYYY-MM-DD")}}).filter("displayCard",["BankNameList",function(a){return function(b){if(b&&b.cardID){var c=b.cardID.toString().substr(12);return a[b.bankID].name+" **** **** **** "+c}return""}}]).filter("displayCard3",function(){return function(a){if(a&&a.cardID){var b=a.cardID.toString().substr(-4),c=a.cardID.toString().substr(0,4);return c+" **** **** "+b}return""}}).filter("displayCard2",["BankNameList",function(){return function(a){if(a&&a.cardID){var b=a.cardID.toString().substr(-4);return b}return""}}]).filter("orderStatus",function(){return function(a){switch(a){case 0:return"等待确认";case 1:return"交易成功";case 2:return"未支付";default:return"未支付"}}}).filter("contractStatus",function(){return function(a){switch(a){case 1:return"进行中";case 2:return"已回款";default:return"未知"}}}).filter("displayOrderType",function(){return function(a){switch(a){case 1:return"充值";case 2:return"提现";case 3:return"盈利提取";case 4:return"股票盈利";case 5:return"保证金返还";case 6:return"保证金支出";case 7:return"管理费支出";case 8:return"管理费返还";case 9:return"保证金支出";case 10:return"管理费支出";case 11:return"投资本金支出";case 12:return"利息收入";case 13:return"推广佣金";case 14:return"佣金兑换余额";case 15:return"穿仓扣除";case 16:return"投资本金返还";case 17:return"余额转入投资本金";case 18:return"投资本金转入余额";case 19:return"配资加配";default:return"充值"}}}).filter("applyStatus",function(){return function(a){switch(a){case 1:return"待支付";case 2:return"操盘中";case 3:return"已结算";case 4:return"审核中";case 5:return"结算中";case 9:return"排队中";default:return"待支付"}}}).filter("payType",function(){return function(a){switch(a){case 0:return"爱贝";case 1:return"盛付通";case 2:return"股票配资盈利";case 3:return"支付宝";case 4:return"银行转账";case 5:return"贝付移动";case 6:return"佣金";case 7:return"牛金";case 8:return"穿仓";case 9:return"易宝";default:return"无"}}}).filter("displayAccountType",function(){return function(a){switch(a){case 2:return"同花顺";case 3:return"牛金操盘";default:return"Homs"}}}).service("days",function(){this.startTime=b,this.endTime=c,this.tradeDaysTillNow=d}).service("util",["warn_factor","sell_factor",function(a,b){this.serviceCharge=19.9,this.getServiceCharge=function(a){switch(a){case 10:return 19.9;case 9:return 18.9;case 8:return 29.9;case 7:return 28.9;case 6:return 27.9;case 5:return 14.9;case 4:return 13.9;case 3:return 10.9;case 2:return 9.9;default:return 19.9}},this.getServiceFee=function(a,b,c){var d=a.discount?a.discount:1;if((0>=d||d>1)&&(d=1),a.type&&2===a.type)return Number(((a.amount-a.amount/a.lever)*a.interestRate*d).toFixed(2));b||(b=a.period);var e=0;return c||(e=a.freeDays>0?a.freeDays:0,b-=e,0>b&&(b=0)),Number((a.amount/1e4*(a.serviceCharge?a.serviceCharge:this.getServiceCharge(a.lever))*b*d).toFixed(2))},this.getWarnValue=function(b,c){return Number((b-a*c).toFixed(2))},this.getSellValue=function(a,c){return Number((a-b*c).toFixed(2))}}]);var e=[{name:"register_content",value:0,content:"验证码：CODE，用于注册，欢迎来到牛金网，为您提供专业贴心的配资服务。"},{name:"reset_pass_content",value:1,content:"验证码：CODE，用于密码重置，请勿泄露给他人！"},{name:"approve_apply_sms_content",value:2,content:"AMOUNT元资金已到账，股票账号ACCOUNT，登录密码PASSWORD，请不要向任何人泄露！"},{name:"close_apply_sms_content",value:3,content:"账户ACCOUNT结算AMOUNT元（保证金DEPOSIT元，收益PROFIT元）已完成，祝您投资愉快。"},{name:"pay_success_sms_content",value:4,content:"充值AMOUNT元成功，请登录查看详情，祝您投资愉快。"},{name:"warn_sms_content",value:5,content:"您的账户（XXXXXXXX）的操盘业务已经亏损到达警戒线，请尽快追加至少XXXX元保证金以维持仓位。"},{name:"sell_sms_content",value:6,content:"账户12345678已经亏损到达平仓线，系统已将其平仓，如需帮助请致电4006921388。"},{name:"withdraw_content",value:7,content:"提现AMOUNT元已完成，请注意查收，如有疑问请致电4006921388。"}];angular.module("commonApp").constant("withdraw_sms_content","您于TIME在牛金网提现AMOUNT元，提现已完成，请注意查收，").constant("get_profit_sms_content","您的盈利提取申请已经处理，资金已划入您在牛金网的余额").constant("approve_apply_sms_content","您有一笔金额为AMOUNT元配资资金已到账，交易账号ACCOUNT，登录密码PASSWORD，您可以通过手机或电脑进行操盘，可以登录牛金网，在我的账户中查看相应账户信息，操盘账户是您操盘的唯一依据，请不要向任何人泄露！").constant("close_apply_sms_content","您在牛金网有一笔TOTAL_AMOUNT元的配资业务已经结算完毕，根据您的操盘收益，该笔配资实际结算AMOUNT元（保证金DEPOSIT元，收益PROFIT元），祝您投资愉快。").constant("pay_success_sms_content","您于TIME在牛金网充值AMOUNT元，资金已经到账，感谢您对牛金网的支持，祝您投资愉快。").constant("warn_sms_content","您有一笔金额为TOTAL_AMOUNT元的操盘业务已经亏损到达警戒线WARN_AMOUNT元，请尽快追加保证金以维持仓位，您可以登录牛金网进行操作，或者联系QQ客服400 692 1388或电话客服400 692 1388。感谢您对牛金网的支持，祝您投资愉快。").constant("sell_sms_content","您有一笔金额为TOTAL_AMOUNT元的操盘业务已经亏损到达平仓线SELL_AMOUNT元，系统已经将交易账户平仓，请登录牛金网查看相应信息，或者联系QQ客服400 692 1388或电话客服400 692 1388。感谢您对牛金网的支持，祝您投资愉快。").constant("sms_macro",e).constant("service_charge",19.9).constant("warn_factor",.4).constant("sell_factor",.6),angular.module("commonApp").constant("BankNameList",[{name:"工商银行",img:"/images/yh/icbc.jpg",logo:"/mobile/images/yh/icbc_logo.jpg",instCode:"ICBC",credit:!0,value:0},{name:"建设银行",img:"/images/yh/cbc.jpg",logo:"/mobile/images/yh/cbc_logo.jpg",instCode:"CCB",credit:!0,value:1},{name:"农业银行",img:"/images/yh/abc.jpg",logo:"/mobile/images/yh/abc_logo.jpg",instCode:"ABC",credit:!0,value:2},{name:"中国银行",img:"/images/yh/boc.png",logo:"/mobile/images/yh/boc_logo.jpg",instCode:"BOC",credit:!0,value:3},{name:"招商银行",img:"/images/yh/cmb.jpg",logo:"/mobile/images/yh/cmb_logo.jpg",instCode:"CMB",credit:!0,value:4},{name:"交通银行",img:"/images/yh/bcs.png",logo:"/mobile/images/yh/bcs_logo.jpg",instCode:"COMM",credit:!0,value:5},{name:"邮政储蓄银行",img:"/images/yh/psbc.png",logo:"/mobile/images/yh/psbc_logo.jpg",instCode:"PSBC",credit:!1,value:6},{name:"广发银行",img:"/images/yh/cgb.png",logo:"/mobile/images/yh/cgb_logo.jpg",instCode:"GDB",credit:!0,value:7},{name:"光大银行",img:"/images/yh/ceb.png",logo:"/mobile/images/yh/ceb_logo.jpg",instCode:"CEB",credit:!0,value:8},{name:"兴业银行",img:"/images/yh/cib.png",logo:"/mobile/images/yh/cib_logo.jpg",instCode:"CIB",credit:!0,value:9},{name:"北京银行",img:"/images/yh/bob.png",logo:"/mobile/images/yh/bob_logo.jpg",instCode:"BCCB",credit:!1,value:10},{name:"浦发银行",img:"/images/yh/spdb.png",logo:"/mobile/images/yh/spdb_logo.jpg",instCode:"SPDB",credit:!0,value:11},{name:"民生银行",img:"/images/yh/cmbc.png",logo:"/mobile/images/yh/cmbc_logo.jpg",instCode:"CMBC",credit:!0,value:12},{name:"中信银行",img:"/images/yh/ecitic.png",logo:"/mobile/images/yh/ecitic_logo.jpg",instCode:"CITIC",credit:!0,value:13},{name:"华夏银行",img:"/images/yh/hx-2.png",logo:"/mobile/images/yh/hx_logo.jpg",instCode:"HXB",credit:!1,value:14},{name:"平安银行",img:"/images/yh/pa.png",logo:"/mobile/images/yh/pa_logo.jpg",instCode:"SZPAB",credit:!0,value:15},{name:"宁波银行",img:"/images/yh/nbcb.png",logo:"/mobile/images/yh/nbcb_logo.jpg",instCode:"NBCB",credit:!1,value:16},{name:"上海银行",img:"/images/yh/bos.png",logo:"/mobile/images/yh/bos_logo.jpg",instCode:"BOS",credit:!0,value:17}]),angular.module("commonApp").factory("njUser",["$resource",function(a){var b=a("/api/user/:id",{id:"@_id"});return b}]),angular.module("commonApp").factory("njApply",["$resource",function(a){var b=a("/api/user/:uid/applies/:serial_id",{uid:"@userID",serial_id:"@serialID"});return b}]),angular.module("commonApp").factory("njOrder",["$resource",function(a){var b=a("/api/user/:uid/orders/:id",{uid:"@userID",id:"@_id"});return b}]),angular.module("commonApp").factory("njCard",["$resource",function(a){var b=a("/api/cards/:uid",{userID:"@uid"});return b}]),angular.module("commonApp").factory("njCachedCards",["njCard",function(a){var b,c;return{setUID:function(a){c=a},query:function(){return b||(b=a.query({uid:c})),b}}}])}();